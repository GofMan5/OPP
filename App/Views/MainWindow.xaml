<Window x:Class="App.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:App.Views"
        mc:Ignorable="d"
        Title="OPP - GofMan3" 
        Height="700" Width="1000"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanMinimize"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        MouseMove="Window_MouseMove"
        Icon="/App;component/OPP.ico">
    
    <Window.Resources>
        <!-- Анимация для логотипа -->
        <Storyboard x:Key="LogoRotation" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetName="LogoCircle" 
                             Storyboard.TargetProperty="RenderTransform.Angle"
                             From="0" To="360" Duration="0:0:12"/>
        </Storyboard>
        
        <!-- Стили для кнопок управления окном -->
        <Style x:Key="WindowControlButton" TargetType="Button">
            <Setter Property="Width" Value="30"/>
            <Setter Property="Height" Value="30"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Opacity" Value="0.8"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="ButtonBorder" 
                                Background="{TemplateBinding Background}" 
                                BorderThickness="{TemplateBinding BorderThickness}" 
                                CornerRadius="4"
                                Padding="7">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="ButtonBorder" Property="Background" Value="#313244"/>
                                <Setter Property="Opacity" Value="1"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="ButtonBorder" Property="Background" Value="#45475a"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <Style x:Key="CloseButtonStyle" TargetType="Button" BasedOn="{StaticResource WindowControlButton}">
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#f38ba8"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#f38ba880"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        
        <!-- Современный стиль для кнопок меню -->
        <Style x:Key="ModernMenuButton" TargetType="Button">
            <Setter Property="Width" Value="320"/>
            <Setter Property="Height" Value="65"/>
            <Setter Property="Margin" Value="0,8,0,8"/>
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="ButtonBorder" 
                                CornerRadius="8" 
                                Background="{TemplateBinding Background}"
                                Padding="25,0,25,0">
                            <Border.Effect>
                                <DropShadowEffect BlurRadius="12" 
                                                 Direction="315" 
                                                 Opacity="0.2" 
                                                 ShadowDepth="2" 
                                                 Color="Black"/>
                            </Border.Effect>
                            <Border.RenderTransform>
                                <TranslateTransform X="0" Y="0"/>
                            </Border.RenderTransform>
                            <Grid>
                                <ContentPresenter VerticalAlignment="Center"/>
                                <Path x:Name="ArrowIcon" 
                                      Data="M8.025 12.375L13.4 7L14.5 8.1L8.025 14.575L3 9.55L4.1 8.45L8.025 12.375Z"
                                      Fill="White" 
                                      Opacity="0.7"
                                      Width="16" 
                                      Height="16" 
                                      HorizontalAlignment="Right" 
                                      VerticalAlignment="Center"
                                      RenderTransformOrigin="0.5,0.5">
                                    <Path.RenderTransform>
                                        <RotateTransform Angle="90"/>
                                    </Path.RenderTransform>
                                </Path>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="ButtonBorder" Property="RenderTransform">
                                    <Setter.Value>
                                        <TranslateTransform X="1.5" Y="-1.5"/>
                                    </Setter.Value>
                                </Setter>
                                <Setter TargetName="ButtonBorder" Property="Effect">
                                    <Setter.Value>
                                        <DropShadowEffect BlurRadius="16" 
                                                         Direction="315" 
                                                         Opacity="0.3" 
                                                         ShadowDepth="4" 
                                                         Color="Black"/>
                                    </Setter.Value>
                                </Setter>
                                <Setter TargetName="ButtonBorder" Property="Opacity" Value="0.95"/>
                                <Setter TargetName="ArrowIcon" Property="Opacity" Value="1"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="ButtonBorder" Property="RenderTransform">
                                    <Setter.Value>
                                        <TranslateTransform X="0.5" Y="-0.5"/>
                                    </Setter.Value>
                                </Setter>
                                <Setter TargetName="ButtonBorder" Property="Effect">
                                    <Setter.Value>
                                        <DropShadowEffect BlurRadius="8" 
                                                         Direction="315" 
                                                         Opacity="0.2" 
                                                         ShadowDepth="1" 
                                                         Color="Black"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Градиенты для кнопок -->
        <LinearGradientBrush x:Key="OptimizationGradient" StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#ff4757" Offset="0"/>
            <GradientStop Color="#ff6b81" Offset="1"/>
        </LinearGradientBrush>

        <LinearGradientBrush x:Key="CleanupGradient" StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#1e90ff" Offset="0"/>
            <GradientStop Color="#70a1ff" Offset="1"/>
        </LinearGradientBrush>
        
        <LinearGradientBrush x:Key="SettingsGradient" StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#2ed573" Offset="0"/>
            <GradientStop Color="#7bed9f" Offset="1"/>
        </LinearGradientBrush>
    </Window.Resources>
    
    <Window.Triggers>
        <EventTrigger RoutedEvent="Window.Loaded">
            <BeginStoryboard Storyboard="{StaticResource LogoRotation}"/>
        </EventTrigger>
    </Window.Triggers>
    
    <Border CornerRadius="12" Padding="0">
        <Border.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#1e1e2e" Offset="0"/>
                <GradientStop Color="#181825" Offset="1"/>
            </LinearGradientBrush>
        </Border.Background>
        <Border.Effect>
            <DropShadowEffect BlurRadius="15" ShadowDepth="0" Opacity="0.5" Color="#121212"/>
        </Border.Effect>
        
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="32"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            
            <!-- Строка заголовка с кнопками управления окном -->
            <Border Grid.Row="0" Background="#11111b" MouseDown="TitleBar_MouseDown" CornerRadius="12,12,0,0">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <TextBlock Grid.Column="1" 
                              Text="OPP - GofMan3" 
                              Foreground="#cdd6f4" 
                              FontSize="13" 
                              FontWeight="SemiBold" 
                              HorizontalAlignment="Center" 
                              VerticalAlignment="Center"/>
                    
                    <!-- Кнопки управления окном -->
                    <StackPanel Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,0,8,0">
                        <!-- Кнопка Свернуть -->
                        <Button x:Name="MinimizeButton" 
                                Style="{StaticResource WindowControlButton}"
                                Click="MinimizeButton_Click"
                                ToolTip="Свернуть">
                            <Path Data="M0,6 L10,6" 
                                 Stroke="#cdd6f4" 
                                 StrokeThickness="1.6" 
                                 VerticalAlignment="Center" 
                                 HorizontalAlignment="Center"
                                 Stretch="Uniform"/>
                        </Button>
                        
                        <!-- Кнопка Закрыть -->
                        <Button x:Name="CloseButton" 
                                Style="{StaticResource CloseButtonStyle}"
                                Click="CloseButton_Click"
                                Margin="3,0,0,0"
                                ToolTip="Закрыть">
                            <Grid>
                                <Path Data="M0,0 L10,10" 
                                     Stroke="#cdd6f4" 
                                     StrokeThickness="1.6" 
                                     StrokeStartLineCap="Round" 
                                     StrokeEndLineCap="Round"/>
                                <Path Data="M0,10 L10,0" 
                                     Stroke="#cdd6f4" 
                                     StrokeThickness="1.6" 
                                     StrokeStartLineCap="Round" 
                                     StrokeEndLineCap="Round"/>
                            </Grid>
                        </Button>
                    </StackPanel>
                </Grid>
            </Border>
            
            <!-- Основное содержимое -->
            <Grid Grid.Row="1">
                <Grid.Background>
                    <RadialGradientBrush Center="0.5,0.5" RadiusX="0.8" RadiusY="0.8" GradientOrigin="0.5,0.5">
                        <GradientStop Color="#1e1e2e" Offset="0"/>
                        <GradientStop Color="#181825" Offset="1"/>
                    </RadialGradientBrush>
                </Grid.Background>
                
                <!-- Интерактивный эффект соединяющихся линий -->
                <Canvas x:Name="ParticleCanvas">
                    <!-- Частицы и линии будут создаваться динамически в коде -->
                </Canvas>
                
                <!-- Главное содержимое - центральная область -->
                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                    <!-- Логотип с эффектом свечения -->
                    <Grid Width="230" Height="230" Margin="0,0,0,35">
                        <Ellipse Width="230" Height="230" StrokeThickness="1">
                            <Ellipse.Stroke>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#f8f8f240" Offset="0"/>
                                    <GradientStop Color="#f8f8f210" Offset="1"/>
                                </LinearGradientBrush>
                            </Ellipse.Stroke>
                        </Ellipse>
                        
                        <Ellipse x:Name="LogoCircle" Width="220" Height="220" StrokeThickness="1.5" RenderTransformOrigin="0.5,0.5">
                            <Ellipse.RenderTransform>
                                <RotateTransform Angle="0"/>
                            </Ellipse.RenderTransform>
                            <Ellipse.Stroke>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#70a1ff" Offset="0"/>
                                    <GradientStop Color="#1e90ff40" Offset="0.5"/>
                                    <GradientStop Color="#7bed9f" Offset="1"/>
                                </LinearGradientBrush>
                            </Ellipse.Stroke>
                        </Ellipse>
                        
                        <Image Source="{StaticResource WelcomeImage}" 
                                Width="140"
                                Height="140"
                                Opacity="1">
                            <Image.Effect>
                                <DropShadowEffect BlurRadius="20" ShadowDepth="0" Opacity="0.5" Color="#1e90ff"/>
                            </Image.Effect>
                        </Image>
                    </Grid>
                    
                    <TextBlock Text="Добро пожаловать!"
                              FontSize="36"
                              FontWeight="Bold"
                              Foreground="#f8f8f2"
                              HorizontalAlignment="Center"
                              Margin="0,0,0,10">
                        <TextBlock.Effect>
                            <DropShadowEffect BlurRadius="10" ShadowDepth="1" Opacity="0.3" Color="#1e90ff"/>
                        </TextBlock.Effect>
                    </TextBlock>
                    
                    <TextBlock Text="Выберите действие для начала работы"
                              FontSize="16"
                              Foreground="#cdd6f4"
                              HorizontalAlignment="Center"
                              TextWrapping="Wrap"
                              TextAlignment="Center"
                              MaxWidth="400"
                              Margin="0,0,0,40"/>
                              
                    <!-- Главное меню - центральные кнопки (современные) -->
                    <StackPanel Width="320">
                        <!-- Кнопка Оптимизация -->
                        <Button Style="{StaticResource ModernMenuButton}"
                                Background="{StaticResource OptimizationGradient}"
                                x:Name="OptimizationButton"
                                Click="OptimizationButton_Click">
                            <StackPanel Orientation="Horizontal">
                                <Path Data="M16 16a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 2a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-8-4a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 2a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm16-4a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm0-2a1 1 0 1 0 0-2 1 1 0 0 0 0 2zM8 6a3 3 0 1 1 0-6 3 3 0 0 1 0 6zM8 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm11.3 1.7a1 1 0 0 1 0 1.4l-11 11a1 1 0 0 1-1.4-1.4l11-11a1 1 0 0 1 1.4 0z" 
                                      Fill="White" 
                                      Width="21" 
                                      Height="21" 
                                      Margin="0,0,12,0"/>
                                <TextBlock Text="Оптимизация" 
                                          Foreground="White" 
                                          FontSize="18" 
                                          FontWeight="Medium" 
                                          VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                    
                        <!-- Кнопка Очистка -->
                        <Button Style="{StaticResource ModernMenuButton}"
                                Background="{StaticResource CleanupGradient}"
                                x:Name="CleanupButton"
                                Click="CleanupButton_Click">
                            <StackPanel Orientation="Horizontal">
                                <Path Data="M17.9 11.3a1 1 0 0 1-.2 1.4 8 8 0 0 1-11.39.25L5 11.6A8 8 0 0 1 16.47 4.3l-1.35 2.93a5 5 0 0 0-7.08 7.07l1.35-1.34a2 2 0 1 1 2.83 2.83l-4.24 4.24a1 1 0 1 1-1.42-1.41l4.24-4.24a.59.59 0 0 0 0-.84.58.58 0 0 0-.84 0l-3.53 3.53a3 3 0 0 1-5.12-2.13c0-.8.31-1.56.88-2.12l1.45-1.45a10 10 0 0 1 14.15.15 1 1 0 0 1 .06 1.4l-.71.71a1 1 0 0 1-.7.28 1 1 0 0 1-.72-.31A8 8 0 0 0 6.34 6.34a8 8 0 0 0-1.58 9.05l1.44-1.44a5 5 0 0 0 7.08-7.07L11.93 8.2a1 1 0 0 1 1.42-1.4l1.58 1.58a7 7 0 0 1-10 9.9l-1.46 1.43a1 1 0 0 1-1.4-1.42l1.35-1.35A9.98 9.98 0 0 1 16.5 5.19l1.4-3.03a1 1 0 0 1 1.84.77l-1.84 4.37z" 
                                      Fill="White" 
                                      Width="21" 
                                      Height="21" 
                                      Margin="0,0,12,0"/>
                                <TextBlock Text="Диски" 
                                          Foreground="White" 
                                          FontSize="18" 
                                          FontWeight="Medium" 
                                          VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                    
                        <!-- Кнопка Настройки -->
                        <Button Style="{StaticResource ModernMenuButton}"
                                Background="{StaticResource SettingsGradient}"
                                x:Name="SettingsButton"
                                Click="SettingsButton_Click">
                            <StackPanel Orientation="Horizontal">
                                <Path Data="M10.825 3.262c.108.108.25.168.402.168h1.4c.152 0 .294-.06.402-.168a.59.59 0 0 0 0-.825l-.7-.7a.574.574 0 0 0-.402-.169c-.152 0-.294.06-.402.168l-.7.7a.589.589 0 0 0 0 .826zm2.613 2.613c.108.108.25.168.402.168.152 0 .293-.06.401-.168l.7-.7a.574.574 0 0 0 .168-.402.574.574 0 0 0-.168-.402l-.7-.7a.574.574 0 0 0-.402-.168.574.574 0 0 0-.401.168l-.7.7a.574.574 0 0 0-.168.402c0 .152.06.293.168.401l.7.7a.574.574 0 0 0 .402.168c.151 0 .293-.06.401-.168zm.7 3.27a.574.574 0 0 0-.402-.168.574.574 0 0 0-.401.168l-.7.7a.574.574 0 0 0-.168.402c0 .152.06.294.168.402l.7.7a.59.59 0 0 0 .825 0l.7-.7a.574.574 0 0 0 .168-.402.574.574 0 0 0-.168-.401l-.7-.7h-.022zm3.989-3.57l1.4-1.4a.574.574 0 0 0 .168-.402.574.574 0 0 0-.168-.402L12.6.625a.59.59 0 0 0-.825 0l-1.4 1.4a.59.59 0 0 0 0 .826.59.59 0 0 0 .825 0l1.301-1.3zM12.5 6.867c-3.412 0-6.19 2.739-6.19 6.104 0 3.366 2.778 6.104 6.19 6.104s6.191-2.738 6.191-6.104c0-3.365-2.779-6.104-6.19-6.104zm0 10.325c-2.37 0-4.305-1.9-4.305-4.22 0-2.322 1.934-4.22 4.305-4.22s4.306 1.898 4.306 4.22c0 2.32-1.935 4.22-4.306 4.22zM6.111 3.129l1.4-1.4a.574.574 0 0 0 .168-.402.574.574 0 0 0-.168-.401L6.21.625a.59.59 0 0 0-.825 0l-1.4 1.4a.59.59 0 0 0 0 .825.59.59 0 0 0 .825 0l1.3-1.3v.58zm5.464 5.94c-2.175 0-3.95 1.745-3.95 3.885 0 2.14 1.775 3.884 3.95 3.884s3.949-1.745 3.949-3.884c0-2.14-1.774-3.885-3.95-3.885zm0 6.5c-1.475 0-2.676-1.178-2.676-2.615 0-1.438 1.2-2.616 2.676-2.616 1.474 0 2.675 1.178 2.675 2.616 0 1.437-1.2 2.615-2.675 2.615z" 
                                      Fill="White" 
                                      Width="21" 
                                      Height="21" 
                                      Margin="0,0,12,0"/>
                                <TextBlock Text="Настройки" 
                                          Foreground="White" 
                                          FontSize="18" 
                                          FontWeight="Medium" 
                                          VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>
                </StackPanel>
                
                <!-- Версия в углу экрана -->
                <TextBlock x:Name="VersionText" 
                          Foreground="#7f849c" 
                          FontSize="12"
                          Margin="12,0,0,8"
                          HorizontalAlignment="Left"
                          VerticalAlignment="Bottom"/>
                
                <!-- Авторское право в углу экрана -->
                <TextBlock Text="© 2025 GofMan3" 
                          Foreground="#7f849c"
                          FontSize="12"
                          Margin="0,0,12,8"
                          HorizontalAlignment="Right"
                          VerticalAlignment="Bottom"/>
                
                <!-- Индикатор загрузки (переработанный) -->
                <Border x:Name="LoadingPanel" 
                       Background="#11111be6"
                       Visibility="Collapsed"
                       CornerRadius="0,0,12,12">
                    <Grid>
                        <StackPanel VerticalAlignment="Center" 
                                   HorizontalAlignment="Center">
                            <Border Background="#1e1e2e" 
                                   CornerRadius="12" 
                                   Padding="30,25" 
                                   Margin="0">
                                <Border.Effect>
                                    <DropShadowEffect BlurRadius="20" 
                                                     ShadowDepth="0" 
                                                     Opacity="0.5" 
                                                     Color="#000000"/>
                                </Border.Effect>
                                <StackPanel>
                                    <Ellipse Width="50" 
                                           Height="50" 
                                           Margin="0,0,0,20" 
                                           StrokeThickness="4">
                                        <Ellipse.Stroke>
                                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                <GradientStop Color="#70a1ff" Offset="0"/>
                                                <GradientStop Color="#7bed9f" Offset="1"/>
                                            </LinearGradientBrush>
                                        </Ellipse.Stroke>
                                        <Ellipse.RenderTransform>
                                            <RotateTransform x:Name="LoadingRotation" CenterX="25" CenterY="25"/>
                                        </Ellipse.RenderTransform>
                                    </Ellipse>
                                    <TextBlock Text="Загрузка..." 
                                             FontSize="18" 
                                             Foreground="White" 
                                             FontWeight="Medium"
                                             HorizontalAlignment="Center"
                                             Margin="0,0,0,8"/>
                                    <StackPanel Orientation="Horizontal" 
                                               HorizontalAlignment="Center">
                                        <Ellipse x:Name="Dot1" 
                                                Width="8" 
                                                Height="8" 
                                                Fill="#f8f8f2" 
                                                Margin="4,0"/>
                                        <Ellipse x:Name="Dot2" 
                                                Width="8" 
                                                Height="8" 
                                                Fill="#f8f8f2" 
                                                Margin="4,0"/>
                                        <Ellipse x:Name="Dot3" 
                                                Width="8" 
                                                Height="8" 
                                                Fill="#f8f8f2" 
                                                Margin="4,0"/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </Grid>
                </Border>
            </Grid>
        </Grid>
    </Border>
</Window> 